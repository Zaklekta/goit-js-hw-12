{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/iziToast-settings.js","../src/main.js"],"sourcesContent":["'use strict';\nimport axios from 'axios';\n\nexport default async function getPictures(searchQuery, currentPage) {\n  axios.defaults.baseURL = 'https://pixabay.com';\n\n  const params = new URLSearchParams({\n    key: '44429729-af770c699ef9a399bd7256131',\n    q: searchQuery,\n    per_page: 15,\n    page: currentPage,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  try {\n    const response = await axios.get(`/api/?${params}`);\n    return response.data;\n  } catch (err) {\n    iziToast.error(iziToastErrorObj);\n  }\n}\n","'use strict';\nexport default function imagesTemplate(data) {\n  return data.hits\n    .map(el => {\n      return ` <li class=\"gallery-item\">\n      <div class=\"thumb\">\n          <a class=\"gallery-link\" href=${el.largeImageURL}>\n            <img class=\"gallery-image\" src=${el.webformatURL} alt=${el.tags} />\n          </a>\n</div>\n          <ul class=\"stat-list\">\n            <li class=\"stat-elem\">\n              <p class=\"stat-elem-name\">Likes</p>\n              <p class=\"stat-elem-score\">${el.likes}</p>\n            </li>\n            <li class=\"stat-elem\">\n              <p class=\"stat-elem-name\">Views</p>\n              <p class=\"stat-elem-score\">${el.views}</p>\n            </li>\n            <li class=\"stat-elem\">\n              <p class=\"stat-elem-name\">Comments</p>\n              <p class=\"stat-elem-score\">${el.comments}</p>\n            </li>\n            <li class=\"stat-elem\">\n              <p class=\"stat-elem-name\">Downloads</p>\n              <p class=\"stat-elem-score\">${el.downloads}</p>\n            </li>\n          </ul>\n        </li>`;\n    })\n    .join('');\n}\n","'use strict';\nexport const iziToastUnsuccessObj = {\n  title: '',\n  message: `Sorry, there are no images matching your search query. Please try again!`,\n  backgroundColor: 'rgb(255, 99, 71)',\n  titleColor: 'rgb(255, 255, 255)',\n  messageColor: 'rgb(255, 255, 255)',\n  messageSize: '16',\n  iconColor: 'rgb(255, 255, 255)',\n  theme: 'dark',\n  progressBarColor: 'rgb(255, 255, 255)',\n  position: 'topRight',\n};\n\nexport const iziToastWarnObj = {\n  title: '',\n  message: 'You forgot to fill in the search field',\n  backgroundColor: 'rgb(255, 165, 0)',\n  messageSize: '16',\n  iconColor: 'rgb(255, 255, 255)',\n  messageColor: 'rgb(255, 255, 255)',\n  theme: 'dark',\n  progressBarColor: 'rgb(255, 255, 255)',\n  position: 'topRight',\n};\n\nexport const iziToastErrorObj = {\n  title: 'Error',\n  message: `Sorry, something went wrong...`,\n  backgroundColor: 'rgb(255, 99, 71)',\n  titleColor: 'rgb(255, 255, 255)',\n  messageColor: 'rgb(255, 255, 255)',\n  messageSize: '16',\n  iconColor: 'rgb(255, 255, 255)',\n  theme: 'dark',\n  progressBarColor: 'rgb(255, 255, 255)',\n  position: 'topRight',\n};\n","import getPictures from './js/pixabay-api';\nimport imagesTemplate from './js/render-functions';\nimport iziToast from 'izitoast';\nimport axios from 'axios';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { iziToastUnsuccessObj } from './js/iziToast-settings';\nimport { iziToastWarnObj } from './js/iziToast-settings';\nimport { iziToastErrorObj } from './js/iziToast-settings';\n\nconst refs = {\n  formElem: document.querySelector('.js-pixabay-form'),\n  pixabayListElem: document.querySelector('.js-pixabay-galery'),\n  loaderContainerElem: document.querySelector('.js-loader-container'),\n  loadMoreBtnElem: document.querySelector('.load-more-btn'),\n};\n\nlet searchQuery = '';\nlet currentPage = 1;\nlet maxPage = 1;\nconst perPage = 15;\n\nrefs.formElem.addEventListener('submit', async e => {\n  e.preventDefault();\n  hideLoadMoreBtn();\n  currentPage = 1;\n  refs.pixabayListElem.innerHTML = '';\n  searchQuery = e.target.elements.query.value.trim();\n  if (searchQuery !== '') {\n    showLoader();\n    try {\n      const data = await getPictures(searchQuery, currentPage);\n      maxPage = Math.ceil(data.totalHits / perPage);\n      if (data.hits.length === 0) {\n        hideLoader();\n        iziToast.error(iziToastUnsuccessObj);\n      } else {\n        const markup = imagesTemplate(data);\n        refs.pixabayListElem.insertAdjacentHTML('afterbegin', markup);\n        let gallery = new SimpleLightbox('.gallery-link', {\n          captionsData: 'alt',\n          captionDelay: 250,\n        });\n        gallery.refresh();\n        if (maxPage !== currentPage) {\n          showLoadMoreBtn();\n        }\n      }\n    } catch (err) {\n      iziToast.error(iziToastErrorObj);\n    }\n    hideLoader();\n  } else {\n    iziToast.warning(iziToastWarnObj);\n  }\n  e.target.reset();\n});\n\nrefs.loadMoreBtnElem.addEventListener('click', async () => {\n  currentPage += 1;\n  hideLoadMoreBtn();\n  showLoader();\n  try {\n    const data = await getPictures(searchQuery, currentPage);\n    showLoader();\n    const markup = imagesTemplate(data);\n    refs.pixabayListElem.insertAdjacentHTML('beforeend', markup);\n    scrollPage();\n    let gallery = new SimpleLightbox('.gallery-link', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    gallery.refresh();\n    updateLoadMoreBtnStatus();\n    hideLoader();\n  } catch (err) {\n    iziToast.error(iziToastErrorObj);\n  }\n  hideLoader();\n});\n\nfunction hideLoader() {\n  refs.loaderContainerElem.classList.add('hidden');\n}\nfunction showLoader() {\n  refs.loaderContainerElem.classList.remove('hidden');\n}\n\nfunction showLoadMoreBtn() {\n  refs.loadMoreBtnElem.classList.remove('hidden');\n}\nfunction hideLoadMoreBtn() {\n  refs.loadMoreBtnElem.classList.add('hidden');\n}\nfunction updateLoadMoreBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideLoadMoreBtn();\n    iziToast.info({\n      title: 'The end!',\n      message: `We're sorry, but you've reached the end of search results!`,\n    });\n  } else {\n    showLoadMoreBtn();\n  }\n}\n\nfunction scrollPage() {\n  const liElem = refs.pixabayListElem.children[0];\n  const height = liElem.getBoundingClientRect().height;\n  scrollBy({\n    top: height * 3,\n    behavior: 'smooth',\n  });\n}\n"],"names":["getPictures","searchQuery","currentPage","axios","params","imagesTemplate","data","el","iziToastUnsuccessObj","iziToastWarnObj","iziToastErrorObj","refs","maxPage","perPage","e","hideLoadMoreBtn","showLoader","hideLoader","iziToast","markup","SimpleLightbox","showLoadMoreBtn","scrollPage","updateLoadMoreBtnStatus","height"],"mappings":"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"}